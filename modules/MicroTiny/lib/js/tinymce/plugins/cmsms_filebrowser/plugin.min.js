tinymce.PluginManager.add("cmsms_filebrowser",function(e){function t(){e.focus(true);var t,n;(function(e){t="600";n="900";if(e.innerHeight<650){t=Math.max(e.innerHeight*.8,250)}if(e.innerWidth<950){n=Math.max(e.innerWidth*.8,250)}})(window);win=e.windowManager.open({title:cmsms_tiny.filepicker_title,file:cmsms_tiny.filepicker_url,classes:"filepicker",width:n,height:t,inline:1,resizable:true,maximizable:true})}e.addButton("cmsms_filebrowser",{icon:"browse",tooltip:cmsms_tiny.filebrowser_title,onclick:t});e.addMenuItem("cmsms_filebrowser",{icon:"browse",text:cmsms_tiny.filebrowser_title,onclick:t,context:"insert",prependToContext:true})})